<!-- 1. Barra de Navegación (Toolbar) -->
<mat-toolbar color="primary">
  <a routerLink="/products" class="navbar-brand">
    <mat-icon class="navbar-logo-icon">storefront</mat-icon>
    <span>Mi Tienda Online</span>
  </a>

  <span class="spacer"></span>

  <button mat-icon-button aria-label="Carrito de compras" routerLink="/cart">
    <mat-icon
      [matBadge]="cartItemCount$ | async"
      [matBadgeHidden]="(cartItemCount$ | async) === 0"
      matBadgeColor="warn">
      shopping_cart
    </mat-icon>
  </button>

  <button *ngIf="!(isAuthenticated$ | async)" mat-raised-button (click)="openLoginDialog()">
    Iniciar Sesión
  </button>

  <!-- 2. Si el usuario SÍ está autenticado, muestra el Menú de Usuario -->
  <div *ngIf="isAuthenticated$ | async">
    <button mat-icon-button [matMenuTriggerFor]="userMenu" aria-label="Menú de usuario">
      <mat-icon>account_circle</mat-icon> <!-- Ícono de avatar genérico -->
    </button>
  </div>

  <!-- Definición del Menú Desplegable -->
  <mat-menu #userMenu="matMenu">
    <!-- El pipe 'async' obtiene el valor del observable 'user$' -->
    <button mat-menu-item disabled *ngIf="user$ | async as user">
      <span>{{ user.email }}</span> <!-- Muestra el email o nombre del usuario -->
    </button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="logout()">
      <mat-icon>logout</mat-icon>
      <span>Cerrar Sesión</span>
    </button>
  </mat-menu>
</mat-toolbar>

<!-- Contenido principal de la página -->
<main class="content">
  <router-outlet></router-outlet>

</main>
<footer class="app-footer">
  <div class="footer-content">
    <div class="footer-section">
      <h4>Mi Tienda Online</h4>
      <p>&copy; 2024. Todos los derechos reservados.</p>
    </div>
    <div class="footer-section">
      <h4>Navegación</h4>
      <ul>
        <li><a routerLink="/products">Productos</a></li>
        <li><a routerLink="/cart">Mi Carrito</a></li>
        <li><a routerLink="/#">Contacto</a></li>
      </ul>
    </div>
    <div class="footer-section">
      <h4>Síguenos</h4>
      <div class="social-icons">
        <!-- Reemplaza '#' con tus enlaces reales -->
        <a href="#" aria-label="Facebook"><mat-icon>facebook</mat-icon></a>
        <a href="#" aria-label="Instagram"><mat-icon>camera_alt</mat-icon></a>
        <a href="#" aria-label="Twitter"><mat-icon>alternate_email</mat-icon></a>
      </div>
    </div>
  </div>
</footer>
